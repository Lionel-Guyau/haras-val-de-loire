{% extends 'layout.html.twig' %}

{% block title %}
	Inscription
{% endblock %}

{% block javascript %}
	<script>
		document.querySelector('[name="activity"]').addEventListener('change', e => {
document.location = '/activity/register?activity=' + e.currentTarget.value;
})
	</script>
{% endblock %}

{% block content %}

	<h1 class=" inscription my-3 text-center text-secondary">Inscription</h1>
	<p class="text-primary mx-4 fs-5 my-3" style="text-align:center">Choisissez une activité à laquelle vous souhaitez vous inscrire</p>

	<div class="container col-11 col-lg-5">
		<form method="POST" id="contactForm" name="contactForm" class="contactForm">
			<div class="row">

				<div class="col-md-12 my-4">
					<div class="form-group">
						<select id="select-activity" name="activity" class="form-select" aria-label="Default select example" required>
							{% if planning is empty %}
								<option selected value="">Choisissez votre type d'activité</option>
							{% endif %}
							{% for activity in activityType %}
								<option value="{{ activity.id }}" {% if selectedActivity and selectedActivity == activity.id %} selected {% endif %}>
									{{ activity.type }}
								</option>
							{% endfor %}
						</select>
					</div>
				</div>

				<div class="col-md-12 my-4">
					<div class="form-group">
						<select class="form-select" name="datetime" aria-label="Default select example" required>
							{% if planning is not empty %}
								<option selected value="">Choisissez votre date et créneau horaire</option>
								{% for date in planning %}
									<option value="{{ date.id }}">{{ "le " ~ date.start_at|date('d/m/Y à H:i') ~ " - " ~ (date.capacity - date.nb_register) ~ " place(s) restante(s)" }}</option>
								{% endfor %}
							{% else %}
								<option selected>Veuillez sélectionner un type d'activité</option>
							{% endif %}
						</select>
					</div>
				</div>

				<div class="col-md-6">
					<div class="form-group">
						<label class="label" for="firstname"></label>
						<input type="text" class="form-control" name="firstname" id="firstname" placeholder="Prénom" required>
					</div>
				</div>
				<div class="col-md-6">
					<div class="form-group">
						<label class="label" for="lastname"></label>
						<input type="text" class="form-control" name="lastname" id="lastname" placeholder="Nom" required>
					</div>
				</div>
				<div class="col-md-12">
					<div class="form-group">
						<label class="label" for="email"></label>
						<input type="email" class="form-control" name="email" id="email" placeholder="Adresse email">
					</div>
				</div>

				{% for error in errors %}
					<div class="alert alert-danger mt-3 text-center" role="alert">
						{{error}}
					</div>
				{% endfor %}

				<div class="col-md-12">
					<div class="form-group text-center">
						<input type="submit" value="Envoyer" class="mt-3 btn btn-primary">
						<div class="submitting"></div>
					</div>
				</div>
			</div>
		</form>
		<div class="col-md-5 d-flex align-items-stretch">
			<div class="info-wrap w-100 p-5 img"></div>
		</div>
	</div>


{% endblock %}
